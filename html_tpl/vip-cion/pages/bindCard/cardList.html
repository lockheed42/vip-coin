<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta id="eqMobileViewport" name="viewport" content="width=320, initial-scale=1, maximum-scale=1, user-scalable=no">
		<!-- 引入样式 -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.0.9/theme-chalk/index.css">
		<link rel="stylesheet" href="../../css/common.css">
		<title>绑定银行卡</title>
		<style>
			.wrap-page .common-width {
				margin-top: 10px;
			}
			
			.wrap-tips {
				width: 100%;
				display: flex;
				justify-content: space-between;
			}
			
			.wrap-card .tips {
				margin: 15px 0px;
				color: #999;
				font-size: 12px;
			}
			
			.wrap-card-input {
				display: flex;
				background-color: rgba(0, 0, 0, 0.5);
				margin-bottom: 10px;
				border-radius: 4px;
			}
			
			.wrap-card-input .label-name {
				min-width: 50px;
				display: flex;
				align-items: center;
				text-indent: 12px;
				color: #CBAA67;
				font-size: 13px;
			}
			
			.wrap-card-input .el-input {
				flex: 1;
			}
			
			.el-radio__input.is-checked .el-radio__inner {
				border-color: #CBAA67;
				background: none;
			}
			
			.el-radio__input.is-checked+.el-radio__label {
				color: #999
			}
			
			.el-radio__inner::after {
				width: 8px;
				height: 8px;
				border-radius: 4px;
				background: #CBAA67;
			}
			
			.card-info {
				background-size: 100% 100%;
				width: 100%;
				height: 157px;
				position: relative;
				margin-top: 15px;
			}
			
			.card-info .card-name,
			.card-info .card-type {
				text-indent: 65px;
				color: #cbaa67;
				position: absolute;
			}
			
			.card-info .card-name {
				font-size: 18px;
				top: 25px;
			}
			
			.card-info .card-type {
				font-size: 13px;
				top: 60px;
			}
			
			.card-info .card-numbers {
				color: #fff;
				font-size: 18px;
				position: absolute;
				bottom: 20px;
				text-indent: 22px;
				text-align: justify;
				opacity: 0.2;
				display: inline-block;
				text-align-last: justify;
				width: 100%;
				padding-right: 20px;
				box-sizing: border-box;
			}
		</style>
	</head>

	<body>
		<div id="bindCard" class="wrap-page wrap-card">
			<div class="back-bar"><span onclick="jumpTo('personalCenter/index.html')" class="icon-back"></span> 绑定银行卡
				<span></span></div>
			<div class="title-bar">
				VIP-CION
			</div>
			<div class="content">
				<div class="common-width">
					<div class="card-list">
						<div v-for="item in card.list" class="card-info" :style="'background:url('+ item.bgUrl +') no-repeat 100% 100%;background-size: 100% 100%;'">
							<div class="card-name" v-text="item.name"></div>
							<div class="card-type" v-text="item.type"></div>
							<div class="card-numbers" v-text="item.numbers"></div>
						</div>
					</div>
					<div class="tips">
						{{ card.tipsText }}
					</div>
				</div>
			</div>
		</div>
	</body>

</html>
<!-- 先引入 Vue -->
<script src="../../js/vue.js"></script>
<!-- 引入组件库 -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/element-ui/2.0.9/index.js"></script>
<!-- axios -->
<script src="../../js/axios.min.js"></script>
<!-- lodash -->
<script src="../../js/lodash.js"></script>
<!-- common.js -->
<script src="../../js/common.js"></script>
<!-- jquery.js -->
<script src="../../js/jquery.js"></script>
<script>
	window.onload = function() {
		$('.content').show();
		new Vue({
			el: '#bindCard',
			data() {
				return {
					card: {
						tipsText: '请绑定持卡人本人的银行卡（只能绑定一张）',
						list: [{
							bgUrl: '../../img/card_bg.png',
							name: '银行名称',
							type: '储蓄卡',
							numbers: '****   ****   ****    ****'
						}]
					}
				}
			},
			mounted: function() {
				this.$nextTick(function() {
					this.getList()
				})
			},
			methods: {
				getList() {
					const urlParams = {
						control: 'user',
						action: 'getCard'
					}
					const method = 'get';
					const basicInfo = apiInfo(urlParams, {}, method);
					const requestUrl = _.get(basicInfo, 'url');
					const requestParams = _.get(basicInfo, 'params');
					const _this = this;
					if(requestUrl && requestParams) {
						$.get(requestUrl, requestParams, function(result) {
							if(result.status === '0') {
								const getCardInfo = _.get(result, 'data');
								_this.card.list[0].name = _.get(getCardInfo, 'bank');
								_this.card.list[0].numbers = _.get(getCardInfo, 'code');
							} else {
								checkStatus(result);
								checkCode(result);
							}
						})
					}
				}
			}
		})
	}
</script>